{"version":3,"sources":["../../lib/utils/flattenTree.js"],"sourcesContent":["import * as React from 'react';\nlet count = 1;\nfunction flattenTreeRecursive(items, parent, level = 1) {\n  return items.reduce((acc, {\n    subtree,\n    ...item\n  }, index) => {\n    var _item_id;\n    const id = (_item_id = item.id) !== null && _item_id !== void 0 ? _item_id : `fui-FlatTreeItem-${count++}`;\n    var _item_value;\n    const flatTreeItem = {\n      'aria-level': level,\n      'aria-posinset': index + 1,\n      'aria-setsize': items.length,\n      parentValue: parent === null || parent === void 0 ? void 0 : parent.value,\n      value: (_item_value = item.value) !== null && _item_value !== void 0 ? _item_value : id,\n      leaf: subtree === undefined,\n      ...item\n    };\n    acc.push(flatTreeItem);\n    if (subtree !== undefined) {\n      acc.push(...flattenTreeRecursive(subtree, flatTreeItem, level + 1));\n    }\n    return acc;\n  }, []);\n}\n/**\n * Converts a nested structure to a flat one which can be consumed by `useFlatTreeItems`\n * @example\n * ```tsx\n * const defaultItems = flattenTree_unstable([\n *  {\n *    children: <TreeItemLayout>level 1, item 1</TreeItemLayout>,\n *    subtree: [\n *      {\n *        children: <TreeItemLayout>level 2, item 1</TreeItemLayout>,\n *      },\n *      {\n *        children: <TreeItemLayout>level 2, item 2</TreeItemLayout>,\n *      },\n *      {\n *        children: <TreeItemLayout>level 2, item 3</TreeItemLayout>,\n *      },\n *    ],\n *  },\n *  {\n *    children: <TreeItemLayout>level 1, item 2</TreeItemLayout>,\n *    subtree: [\n *      {\n *        children: <TreeItemLayout>level 2, item 1</TreeItemLayout>,\n *        subtree: [\n *          {\n *            children: <TreeItemLayout>level 3, item 1</TreeItemLayout>,\n *            subtree: [\n *              {\n *                children: <TreeItemLayout>level 4, item 1</TreeItemLayout>,\n *              },\n *            ],\n *          },\n *        ],\n *      },\n *    ],\n *  },\n * ]);\n * ```\n */ // eslint-disable-next-line @typescript-eslint/naming-convention\nexport const flattenTree_unstable = items => flattenTreeRecursive(items);\n/**\n * @internal\n */\nexport const flattenTreeFromElement = (root, parent, level = 1) => {\n  const children = React.Children.toArray(root.props.children);\n  return children.reduce((acc, curr, index) => {\n    const [content, subtree] = React.Children.toArray(curr.props.children);\n    var _curr_props_id;\n    const id = (_curr_props_id = curr.props.id) !== null && _curr_props_id !== void 0 ? _curr_props_id : `fui-FlatTreeItem-${count++}`;\n    var _curr_props_value;\n    const flatTreeItem = {\n      'aria-level': level,\n      'aria-posinset': index + 1,\n      'aria-setsize': children.length,\n      parentValue: parent === null || parent === void 0 ? void 0 : parent.value,\n      value: (_curr_props_value = curr.props.value) !== null && _curr_props_value !== void 0 ? _curr_props_value : id,\n      leaf: subtree === undefined,\n      ...curr.props,\n      children: content\n    };\n    acc.push(flatTreeItem);\n    if (subtree !== undefined) {\n      acc.push(...flattenTreeFromElement(subtree, flatTreeItem, level + 1));\n    }\n    return acc;\n  }, []);\n};\n//# sourceMappingURL=flattenTree.js.map"],"names":["flattenTree_unstable","flattenTreeFromElement","count","flattenTreeRecursive","items","parent","level","reduce","acc","subtree","item","index","_item_id","id","_item_value","flatTreeItem","length","parentValue","value","leaf","undefined","push","root","children","React","Children","toArray","props","curr","content","_curr_props_id","_curr_props_value"],"mappings":";;;;;;;;;;;IAkEaA,oBAAoB,MAApBA;IAIAC,sBAAsB,MAAtBA;;;6DAtEU;AACvB,IAAIC,QAAQ;AACZ,SAASC,qBAAqBC,KAAK,EAAEC,MAAM,EAAEC,QAAQ,CAAC,EAAE;IACtD,OAAOF,MAAMG,MAAM,CAAC,CAACC,KAAK,EACxBC,QAAO,EACP,GAAGC,MACJ,EAAEC,QAAU;QACX,IAAIC;QACJ,MAAMC,KAAK,AAACD,CAAAA,WAAWF,KAAKG,EAAE,AAAD,MAAO,IAAI,IAAID,aAAa,KAAK,IAAIA,WAAW,CAAC,iBAAiB,EAAEV,QAAQ,CAAC;QAC1G,IAAIY;QACJ,MAAMC,eAAe;YACnB,cAAcT;YACd,iBAAiBK,QAAQ;YACzB,gBAAgBP,MAAMY,MAAM;YAC5BC,aAAaZ,WAAW,IAAI,IAAIA,WAAW,KAAK,IAAI,KAAK,IAAIA,OAAOa,KAAK;YACzEA,OAAO,AAACJ,CAAAA,cAAcJ,KAAKQ,KAAK,AAAD,MAAO,IAAI,IAAIJ,gBAAgB,KAAK,IAAIA,cAAcD,EAAE;YACvFM,MAAMV,YAAYW;YAClB,GAAGV,IAAI;QACT;QACAF,IAAIa,IAAI,CAACN;QACT,IAAIN,YAAYW,WAAW;YACzBZ,IAAIa,IAAI,IAAIlB,qBAAqBM,SAASM,cAAcT,QAAQ;QAClE,CAAC;QACD,OAAOE;IACT,GAAG,EAAE;AACP;AAyCO,MAAMR,uBAAuBI,CAAAA,QAASD,qBAAqBC;AAI3D,MAAMH,yBAAyB,CAACqB,MAAMjB,QAAQC,QAAQ,CAAC,GAAK;IACjE,MAAMiB,WAAWC,OAAMC,QAAQ,CAACC,OAAO,CAACJ,KAAKK,KAAK,CAACJ,QAAQ;IAC3D,OAAOA,SAAShB,MAAM,CAAC,CAACC,KAAKoB,MAAMjB,QAAU;QAC3C,MAAM,CAACkB,SAASpB,QAAQ,GAAGe,OAAMC,QAAQ,CAACC,OAAO,CAACE,KAAKD,KAAK,CAACJ,QAAQ;QACrE,IAAIO;QACJ,MAAMjB,KAAK,AAACiB,CAAAA,iBAAiBF,KAAKD,KAAK,CAACd,EAAE,AAAD,MAAO,IAAI,IAAIiB,mBAAmB,KAAK,IAAIA,iBAAiB,CAAC,iBAAiB,EAAE5B,QAAQ,CAAC;QAClI,IAAI6B;QACJ,MAAMhB,eAAe;YACnB,cAAcT;YACd,iBAAiBK,QAAQ;YACzB,gBAAgBY,SAASP,MAAM;YAC/BC,aAAaZ,WAAW,IAAI,IAAIA,WAAW,KAAK,IAAI,KAAK,IAAIA,OAAOa,KAAK;YACzEA,OAAO,AAACa,CAAAA,oBAAoBH,KAAKD,KAAK,CAACT,KAAK,AAAD,MAAO,IAAI,IAAIa,sBAAsB,KAAK,IAAIA,oBAAoBlB,EAAE;YAC/GM,MAAMV,YAAYW;YAClB,GAAGQ,KAAKD,KAAK;YACbJ,UAAUM;QACZ;QACArB,IAAIa,IAAI,CAACN;QACT,IAAIN,YAAYW,WAAW;YACzBZ,IAAIa,IAAI,IAAIpB,uBAAuBQ,SAASM,cAAcT,QAAQ;QACpE,CAAC;QACD,OAAOE;IACT,GAAG,EAAE;AACP,GACA,uCAAuC"}
{"version":3,"names":["keys","React","getDropdownActionFromKey","e","options","open","multiselect","code","key","altKey","ctrlKey","metaKey","length","Space","ArrowDown","ArrowUp","Enter","Escape","Home","End","PageUp","PageDown","Tab","getIndexFromAction","action","currentIndex","maxIndex","Math","min","max"],"sources":["../../src/utils/dropdownKeyActions.ts"],"sourcesContent":["import * as keys from '@fluentui/keyboard-keys';\nimport * as React from 'react';\n\n/**\n * enum of actions available in any type of managed dropdown control\n * e.g. combobox, select, datepicker, menu\n */\nexport type DropdownActions =\n  | 'Close'\n  | 'CloseSelect'\n  | 'First'\n  | 'Last'\n  | 'Next'\n  | 'None'\n  | 'Open'\n  | 'PageDown'\n  | 'PageUp'\n  | 'Previous'\n  | 'Select'\n  | 'Tab'\n  | 'Type';\n\nexport interface DropdownActionOptions {\n  open?: boolean;\n  multiselect?: boolean;\n}\n\n/**\n * Converts a keyboard interaction into a defined action\n */\nexport function getDropdownActionFromKey(\n  e: KeyboardEvent | React.KeyboardEvent,\n  options: DropdownActionOptions = {},\n): DropdownActions {\n  const { open = true, multiselect = false } = options;\n  const code = e.key;\n  const { altKey, ctrlKey, key, metaKey } = e;\n\n  // typing action occurs whether open or closed\n  if (key.length === 1 && code !== keys.Space && !altKey && !ctrlKey && !metaKey) {\n    return 'Type';\n  }\n\n  // handle opening the dropdown if closed\n  if (!open) {\n    if (code === keys.ArrowDown || code === keys.ArrowUp || code === keys.Enter || code === keys.Space) {\n      return 'Open';\n    }\n\n    // if the dropdown is closed and an action did not match the above, do nothing\n    return 'None';\n  }\n\n  // select or close actions\n  if ((code === keys.ArrowUp && altKey) || code === keys.Enter || (!multiselect && code === keys.Space)) {\n    return 'CloseSelect';\n  }\n  if (multiselect && code === keys.Space) {\n    return 'Select';\n  }\n  if (code === keys.Escape) {\n    return 'Close';\n  }\n\n  // navigation interactions\n  if (code === keys.ArrowDown) {\n    return 'Next';\n  }\n  if (code === keys.ArrowUp) {\n    return 'Previous';\n  }\n  if (code === keys.Home) {\n    return 'First';\n  }\n  if (code === keys.End) {\n    return 'Last';\n  }\n  if (code === keys.PageUp) {\n    return 'PageUp';\n  }\n  if (code === keys.PageDown) {\n    return 'PageDown';\n  }\n  if (code === keys.Tab) {\n    return 'Tab';\n  }\n\n  // if nothing matched, return none\n  return 'None';\n}\n\n/**\n * Returns the requested option index from an action\n */\nexport function getIndexFromAction(action: DropdownActions, currentIndex: number, maxIndex: number): number {\n  switch (action) {\n    case 'Next':\n      return Math.min(maxIndex, currentIndex + 1);\n      break;\n    case 'Previous':\n      return Math.max(0, currentIndex - 1);\n    case 'First':\n      return 0;\n    case 'Last':\n      return maxIndex;\n    case 'PageDown':\n      return Math.min(maxIndex, currentIndex + 10);\n    case 'PageUp':\n      return Math.max(0, currentIndex - 10);\n    default:\n      return currentIndex;\n  }\n}\n"],"mappings":"AAAA,YAAYA,IAAA,MAAU;AACtB,YAAYC,KAAA,MAAW;AA0BvB;;;AAGA,OAAO,SAASC,yBACdC,CAAsC,EACtCC,OAAA,GAAiC,CAAC,CAAC,EAClB;EACjB,MAAM;IAAEC,IAAA,GAAO,IAAI;IAAEC,WAAA,GAAc;EAAK,CAAE,GAAGF,OAAA;EAC7C,MAAMG,IAAA,GAAOJ,CAAA,CAAEK,GAAG;EAClB,MAAM;IAAEC,MAAA;IAAQC,OAAA;IAASF,GAAA;IAAKG;EAAO,CAAE,GAAGR,CAAA;EAE1C;EACA,IAAIK,GAAA,CAAII,MAAM,KAAK,KAAKL,IAAA,KAASP,IAAA,CAAKa,KAAK,IAAI,CAACJ,MAAA,IAAU,CAACC,OAAA,IAAW,CAACC,OAAA,EAAS;IAC9E,OAAO;EACT;EAEA;EACA,IAAI,CAACN,IAAA,EAAM;IACT,IAAIE,IAAA,KAASP,IAAA,CAAKc,SAAS,IAAIP,IAAA,KAASP,IAAA,CAAKe,OAAO,IAAIR,IAAA,KAASP,IAAA,CAAKgB,KAAK,IAAIT,IAAA,KAASP,IAAA,CAAKa,KAAK,EAAE;MAClG,OAAO;IACT;IAEA;IACA,OAAO;EACT;EAEA;EACA,IAAIN,IAAC,KAASP,IAAA,CAAKe,OAAO,IAAIN,MAAA,IAAWF,IAAA,KAASP,IAAA,CAAKgB,KAAK,IAAK,CAACV,WAAA,IAAeC,IAAA,KAASP,IAAA,CAAKa,KAAK,EAAG;IACrG,OAAO;EACT;EACA,IAAIP,WAAA,IAAeC,IAAA,KAASP,IAAA,CAAKa,KAAK,EAAE;IACtC,OAAO;EACT;EACA,IAAIN,IAAA,KAASP,IAAA,CAAKiB,MAAM,EAAE;IACxB,OAAO;EACT;EAEA;EACA,IAAIV,IAAA,KAASP,IAAA,CAAKc,SAAS,EAAE;IAC3B,OAAO;EACT;EACA,IAAIP,IAAA,KAASP,IAAA,CAAKe,OAAO,EAAE;IACzB,OAAO;EACT;EACA,IAAIR,IAAA,KAASP,IAAA,CAAKkB,IAAI,EAAE;IACtB,OAAO;EACT;EACA,IAAIX,IAAA,KAASP,IAAA,CAAKmB,GAAG,EAAE;IACrB,OAAO;EACT;EACA,IAAIZ,IAAA,KAASP,IAAA,CAAKoB,MAAM,EAAE;IACxB,OAAO;EACT;EACA,IAAIb,IAAA,KAASP,IAAA,CAAKqB,QAAQ,EAAE;IAC1B,OAAO;EACT;EACA,IAAId,IAAA,KAASP,IAAA,CAAKsB,GAAG,EAAE;IACrB,OAAO;EACT;EAEA;EACA,OAAO;AACT;AAEA;;;AAGA,OAAO,SAASC,mBAAmBC,MAAuB,EAAEC,YAAoB,EAAEC,QAAgB,EAAU;EAC1G,QAAQF,MAAA;IACN,KAAK;MACH,OAAOG,IAAA,CAAKC,GAAG,CAACF,QAAA,EAAUD,YAAA,GAAe;MACzC;IACF,KAAK;MACH,OAAOE,IAAA,CAAKE,GAAG,CAAC,GAAGJ,YAAA,GAAe;IACpC,KAAK;MACH,OAAO;IACT,KAAK;MACH,OAAOC,QAAA;IACT,KAAK;MACH,OAAOC,IAAA,CAAKC,GAAG,CAACF,QAAA,EAAUD,YAAA,GAAe;IAC3C,KAAK;MACH,OAAOE,IAAA,CAAKE,GAAG,CAAC,GAAGJ,YAAA,GAAe;IACpC;MACE,OAAOA,YAAA;EAAA;AAEb"}
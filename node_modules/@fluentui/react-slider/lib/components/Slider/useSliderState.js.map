{"version":3,"names":["React","clamp","useControllableState","useEventCallback","useFluent_unstable","useFluent","sliderCSSVars","sliderStepsPercentVar","sliderProgressVar","sliderDirectionVar","getPercent","value","min","max","useSliderState_unstable","state","props","defaultValue","step","dir","currentValue","setCurrentValue","undefined","defaultState","initialState","valuePercent","inputOnChange","input","onChange","propsOnChange","ev","newValue","Number","target","rootVariables","vertical","root","style"],"sources":["../../../src/components/Slider/useSliderState.tsx"],"sourcesContent":["import * as React from 'react';\nimport { clamp, useControllableState, useEventCallback } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { sliderCSSVars } from './useSliderStyles';\nimport type { SliderState, SliderProps } from './Slider.types';\n\nconst { sliderStepsPercentVar, sliderProgressVar, sliderDirectionVar } = sliderCSSVars;\n\nconst getPercent = (value: number, min: number, max: number) => {\n  return max === min ? 0 : ((value - min) / (max - min)) * 100;\n};\n\nexport const useSliderState_unstable = (state: SliderState, props: SliderProps) => {\n  const { defaultValue = 0, min = 0, max = 100, step, value } = props;\n  const { dir } = useFluent();\n  const [currentValue, setCurrentValue] = useControllableState({\n    state: value !== undefined ? clamp(value, min, max) : undefined,\n    defaultState: clamp(defaultValue, min, max),\n    initialState: 0,\n  });\n  const valuePercent = getPercent(currentValue, min, max);\n\n  const inputOnChange = state.input.onChange;\n  const propsOnChange = props.onChange;\n\n  const onChange: React.ChangeEventHandler<HTMLInputElement> = useEventCallback(ev => {\n    const newValue = Number(ev.target.value);\n    setCurrentValue(clamp(newValue, min, max));\n\n    if (inputOnChange && inputOnChange !== propsOnChange) {\n      inputOnChange(ev);\n    } else if (propsOnChange) {\n      propsOnChange(ev, { value: newValue });\n    }\n  });\n\n  const rootVariables = {\n    [sliderDirectionVar]: state.vertical ? '0deg' : dir === 'ltr' ? '90deg' : '270deg',\n    [sliderStepsPercentVar]: step && step > 0 ? `${(step * 100) / (max - min)}%` : '',\n    [sliderProgressVar]: `${valuePercent}%`,\n  };\n\n  // Root props\n  state.root.style = {\n    ...rootVariables,\n    ...state.root.style,\n  };\n\n  // Input Props\n  state.input.value = currentValue;\n  state.input.onChange = onChange;\n\n  return state;\n};\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,KAAK,EAAEC,oBAAoB,EAAEC,gBAAgB,QAAQ;AAC9D,SAASC,kBAAA,IAAsBC,SAAS,QAAQ;AAChD,SAASC,aAAa,QAAQ;AAG9B,MAAM;EAAEC,qBAAA;EAAuBC,iBAAA;EAAmBC;AAAkB,CAAE,GAAGH,aAAA;AAEzE,MAAMI,UAAA,GAAaA,CAACC,KAAA,EAAeC,GAAA,EAAaC,GAAA,KAAgB;EAC9D,OAAOA,GAAA,KAAQD,GAAA,GAAM,IAAI,CAAED,KAAA,GAAQC,GAAE,KAAMC,GAAA,GAAMD,GAAE,IAAM,GAAG;AAC9D;AAEA,OAAO,MAAME,uBAAA,GAA0BA,CAACC,KAAA,EAAoBC,KAAA,KAAuB;EACjF,MAAM;IAAEC,YAAA,GAAe;IAAGL,GAAA,GAAM;IAAGC,GAAA,GAAM;IAAKK,IAAA;IAAMP;EAAK,CAAE,GAAGK,KAAA;EAC9D,MAAM;IAAEG;EAAG,CAAE,GAAGd,SAAA;EAChB,MAAM,CAACe,YAAA,EAAcC,eAAA,CAAgB,GAAGnB,oBAAA,CAAqB;IAC3Da,KAAA,EAAOJ,KAAA,KAAUW,SAAA,GAAYrB,KAAA,CAAMU,KAAA,EAAOC,GAAA,EAAKC,GAAA,IAAOS,SAAS;IAC/DC,YAAA,EAActB,KAAA,CAAMgB,YAAA,EAAcL,GAAA,EAAKC,GAAA;IACvCW,YAAA,EAAc;EAChB;EACA,MAAMC,YAAA,GAAef,UAAA,CAAWU,YAAA,EAAcR,GAAA,EAAKC,GAAA;EAEnD,MAAMa,aAAA,GAAgBX,KAAA,CAAMY,KAAK,CAACC,QAAQ;EAC1C,MAAMC,aAAA,GAAgBb,KAAA,CAAMY,QAAQ;EAEpC,MAAMA,QAAA,GAAuDzB,gBAAA,CAAiB2B,EAAA,IAAM;IAClF,MAAMC,QAAA,GAAWC,MAAA,CAAOF,EAAA,CAAGG,MAAM,CAACtB,KAAK;IACvCU,eAAA,CAAgBpB,KAAA,CAAM8B,QAAA,EAAUnB,GAAA,EAAKC,GAAA;IAErC,IAAIa,aAAA,IAAiBA,aAAA,KAAkBG,aAAA,EAAe;MACpDH,aAAA,CAAcI,EAAA;IAChB,OAAO,IAAID,aAAA,EAAe;MACxBA,aAAA,CAAcC,EAAA,EAAI;QAAEnB,KAAA,EAAOoB;MAAS;IACtC;EACF;EAEA,MAAMG,aAAA,GAAgB;IACpB,CAACzB,kBAAA,GAAqBM,KAAA,CAAMoB,QAAQ,GAAG,SAAShB,GAAA,KAAQ,QAAQ,UAAU,QAAQ;IAClF,CAACZ,qBAAA,GAAwBW,IAAA,IAAQA,IAAA,GAAO,IAAK,GAAEA,IAAC,GAAO,OAAQL,GAAA,GAAMD,GAAE,CAAG,GAAE,GAAG,EAAE;IACjF,CAACJ,iBAAA,GAAqB,GAAEiB,YAAa;EACvC;EAEA;EACAV,KAAA,CAAMqB,IAAI,CAACC,KAAK,GAAG;IACjB,GAAGH,aAAa;IAChB,GAAGnB,KAAA,CAAMqB,IAAI,CAACC;EAChB;EAEA;EACAtB,KAAA,CAAMY,KAAK,CAAChB,KAAK,GAAGS,YAAA;EACpBL,KAAA,CAAMY,KAAK,CAACC,QAAQ,GAAGA,QAAA;EAEvB,OAAOb,KAAA;AACT"}
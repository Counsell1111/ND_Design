{"version":3,"names":["React","useEventCallback","resolveShorthand","useMergedRefs","getNativeElementProps","useFluent_unstable","useFluent","useCharacterSearch","useMenuTriggerContext_unstable","ChevronRightFilled","ChevronRightRegular","ChevronLeftFilled","ChevronLeftRegular","bundleIcon","useMenuListContext_unstable","useMenuContext_unstable","useARIAButtonProps","Enter","Space","ChevronRightIcon","ChevronLeftIcon","useMenuItem_unstable","props","ref","isSubmenuTrigger","persistOnClickContext","context","persistOnItemClick","as","disabled","hasSubmenu","persistOnClick","hasIcons","hasCheckmarks","setOpen","dir","innerRef","useRef","dismissedWithKeyboardRef","state","components","root","icon","checkmark","submenuIndicator","content","secondaryContent","role","disabledFocusable","onKeyDown","event","_props_onKeyDown","call","isDefaultPrevented","key","current","onMouseEnter","_innerRef_current","_props_onMouseEnter","focus","onClick","_props_onClick","open","keyboard","bubble","type","required","defaultProps","children","createElement"],"sources":["../../../src/components/MenuItem/useMenuItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventCallback, resolveShorthand, useMergedRefs, getNativeElementProps } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { useCharacterSearch } from './useCharacterSearch';\nimport { useMenuTriggerContext_unstable } from '../../contexts/menuTriggerContext';\nimport {\n  ChevronRightFilled,\n  ChevronRightRegular,\n  ChevronLeftFilled,\n  ChevronLeftRegular,\n  bundleIcon,\n} from '@fluentui/react-icons';\nimport { useMenuListContext_unstable } from '../../contexts/menuListContext';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport type { MenuItemProps, MenuItemState } from './MenuItem.types';\nimport { ARIAButtonElement, ARIAButtonElementIntersection, useARIAButtonProps } from '@fluentui/react-aria';\nimport { Enter, Space } from '@fluentui/keyboard-keys';\n\nconst ChevronRightIcon = bundleIcon(ChevronRightFilled, ChevronRightRegular);\nconst ChevronLeftIcon = bundleIcon(ChevronLeftFilled, ChevronLeftRegular);\n\n/**\n * Returns the props and state required to render the component\n */\nexport const useMenuItem_unstable = (props: MenuItemProps, ref: React.Ref<ARIAButtonElement<'div'>>): MenuItemState => {\n  const isSubmenuTrigger = useMenuTriggerContext_unstable();\n  const persistOnClickContext = useMenuContext_unstable(context => context.persistOnItemClick);\n  const { as = 'div', disabled = false, hasSubmenu = isSubmenuTrigger, persistOnClick = persistOnClickContext } = props;\n  const hasIcons = useMenuListContext_unstable(context => context.hasIcons);\n  const hasCheckmarks = useMenuListContext_unstable(context => context.hasCheckmarks);\n  const setOpen = useMenuContext_unstable(context => context.setOpen);\n\n  const { dir } = useFluent();\n  const innerRef = React.useRef<ARIAButtonElementIntersection<'div'>>(null);\n  const dismissedWithKeyboardRef = React.useRef(false);\n\n  const state: MenuItemState = {\n    hasSubmenu,\n    disabled,\n    persistOnClick,\n    components: {\n      root: 'div',\n      icon: 'span',\n      checkmark: 'span',\n      submenuIndicator: 'span',\n      content: 'span',\n      secondaryContent: 'span',\n    },\n    root: getNativeElementProps(\n      as,\n      useARIAButtonProps(as, {\n        role: 'menuitem',\n        ...props,\n        disabled: false,\n        disabledFocusable: disabled,\n        ref: useMergedRefs(ref, innerRef) as React.Ref<ARIAButtonElementIntersection<'div'>>,\n        onKeyDown: useEventCallback(event => {\n          props.onKeyDown?.(event);\n          if (!event.isDefaultPrevented() && (event.key === Space || event.key === Enter)) {\n            dismissedWithKeyboardRef.current = true;\n          }\n        }),\n        onMouseEnter: useEventCallback(event => {\n          innerRef.current?.focus();\n\n          props.onMouseEnter?.(event);\n        }),\n        onClick: useEventCallback(event => {\n          if (!hasSubmenu && !persistOnClick) {\n            setOpen(event, {\n              open: false,\n              keyboard: dismissedWithKeyboardRef.current,\n              bubble: true,\n              type: 'menuItemClick',\n              event,\n            });\n            dismissedWithKeyboardRef.current = false;\n          }\n\n          props.onClick?.(event);\n        }),\n      }),\n    ),\n    icon: resolveShorthand(props.icon, { required: hasIcons }),\n    checkmark: resolveShorthand(props.checkmark, { required: hasCheckmarks }),\n    submenuIndicator: resolveShorthand(props.submenuIndicator, {\n      required: hasSubmenu,\n      defaultProps: {\n        children: dir === 'ltr' ? <ChevronRightIcon /> : <ChevronLeftIcon />,\n      },\n    }),\n    content: resolveShorthand(props.content, {\n      required: !!props.children,\n      defaultProps: { children: props.children },\n    }),\n    secondaryContent: resolveShorthand(props.secondaryContent),\n  };\n  useCharacterSearch(state, innerRef);\n  return state;\n};\n"],"mappings":"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"}